<div class="register-container">
  <p-card class="register-card">
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
      <div class="form-title">Crear cuenta</div>
      <div class="helper-text">Introduce tus datos para registrarte</div>

      <div class="field-row">
        <div class="field">
          <label for="name">Nombre</label>
          <input
            id="name"
            type="text"
            pInputText
            formControlName="name"
            placeholder="Introduce tu nombre"
            autocomplete="name"
            autofocus
            aria-describedby="name-error"
          />
          <small
            *ngIf="registerForm.get('name')?.invalid && registerForm.get('name')?.touched"
            id="name-error"
            class="p-error"
          >
            Nombre és obligatorio
          </small>
        </div>

        <div class="field">
          <label for="surname">Primer Apellido</label>
          <input
            id="surname"
            type="text"
            pInputText
            formControlName="surname"
            placeholder="Introduce tu primer apellido"
            aria-describedby="surname1-error"
          />
          <small
            *ngIf="registerForm.get('surname')?.invalid && registerForm.get('surnname')?.touched"
            id="surname-error"
            class="p-error"
          >
            El apellido no és válido
          </small>
        </div>
      </div>

      <div class="field-row">
        <div class="field">
          <label for="surname2">Segundo Apellido</label>
          <input
            id="surname2"
            type="text"
            pInputText
            formControlName="surname2"
            placeholder="Introduce tu segundo apellido"
            aria-describedby="surname2-error"
          />
        </div>
      </div>

      <div class="field-row">
        <div class="field">
          <label for="birthDate">Fecha de nacimiento</label>
          <p-datePicker
            id="birthDate"
            formControlName="birthDate"
            dateFormat="dd/mm/yy"
            placeholder="Selecciona tu fecha de nacimiento"
            aria-describedby="birthDate-error"
            [maxDate]="minDate"
          ></p-datePicker>
          <small class="info-text">
            Solo puedes registrarte si eres mayor de 18 años.
          </small>
          <small
            *ngIf="registerForm.get('birthDate')?.invalid && registerForm.get('birthDate')?.touched"
            id="birthDate-error"
            class="p-error"
          >
            Fecha de nacimiento no válida
          </small>
        </div>
      </div>

      <div class="field-row">
        <div class="field">
          <label for="email">Correo electrónico</label>
          <input
            id="email"
            type="email"
            pInputText
            formControlName="email"
            placeholder="Introduce tu correo"
            autocomplete="email"
            aria-describedby="email-error"
          />
          <small
            *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
            id="email-error"
            class="p-error"
          >
            Correo no válido
          </small>
        </div>
      </div>

      <div class="field-row">
        <div class="field">
          <label for="password">Contraseña</label>
          <input
            id="password"
            type="password"
            pPassword
            formControlName="password"
            placeholder="Introduce tu contraseña"
            [feedback]="false"
            autocomplete="new-password"
            aria-describedby="password-error"
          />
          <small
            *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
            id="password-error"
            class="p-error"
          >
            Contraseña obligatoria
          </small>
        </div>

        <div class="field">
          <label for="confirmPassword">Confirmar contraseña</label>
          <input
            id="confirmPassword"
            type="password"
            pPassword
            formControlName="confirmPassword"
            placeholder="Repite tu contraseña"
            [feedback]="false"
            autocomplete="new-password"
            aria-describedby="confirmPassword-error"
          />
          <small
            *ngIf="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched"
            id="confirmPassword-error"
            class="p-error"
          >
            Las contraseñas no coinciden
          </small>
        </div>
      </div>

      <div class="field">
        <button
          type="submit"
          pButton
          label="Registrarse"
          [disabled]="registerForm.invalid || loading"
          [loading]="loading"
        ></button>
      </div>
      <div *ngIf="errorMsg" class="p-error" style="text-align:center; margin-top: 1rem;">
        {{ errorMsg }}
      </div>

      <div class="register-link">
        <p>¿Ya tienes cuenta? <a routerLink="/login">Inicia sesión</a></p>
      </div>
    </form>
  </p-card>
</div>
