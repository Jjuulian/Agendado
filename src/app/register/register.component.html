<div class="register-container">
  <p-card class="register-card">
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
      <div class="form-title">Crear cuenta</div>
      <div class="helper-text">Introduce your information to register</div>

      <div class="field-row">
        <div class="field">
          <label for="name">Name</label>
          <input
            id="name"
            type="text"
            pInputText
            formControlName="name"
            placeholder="Introduce your name"
            autocomplete="name"
            autofocus
            aria-describedby="name-error"
          />
          <small
            *ngIf="registerForm.get('name')?.invalid && registerForm.get('name')?.touched"
            id="name-error"
            class="p-error"
          >
            Name is required
          </small>
        </div>

        <div class="field">
          <label for="surname">First Last Name</label>
          <input
            id="surname"
            type="text"
            pInputText
            formControlName="surname"
            placeholder="Introduce your first last name"
            aria-describedby="surname1-error"
          />
          <small
            *ngIf="registerForm.get('surname')?.invalid && registerForm.get('surnname')?.touched"
            id="surname-error"
            class="p-error"
          >
            The last name is not valid
          </small>
        </div>
      </div>

      <div class="field-row">
        <div class="field">
          <label for="surname2">Second Last Name</label>
          <input
            id="surname2"
            type="text"
            pInputText
            formControlName="surname2"
            placeholder="Introduce your second last name"
            aria-describedby="surname2-error"
          />
        </div>
      </div>

      <div class="field-row">
        <div class="field">
          <label for="birthDate">Birth Date</label>
          <p-datePicker
            id="birthDate"
            formControlName="birthDate"
            dateFormat="dd/mm/yy"
            placeholder="Select your birth date"
            aria-describedby="birthDate-error"
            [maxDate]="minDate"
          ></p-datePicker>
          <small class="info-text">
            You can only register if you are over 18 years old.
          </small>
          <small
            *ngIf="registerForm.get('birthDate')?.invalid && registerForm.get('birthDate')?.touched"
            id="birthDate-error"
            class="p-error"
          >
            Birth date is not valid.
          </small>
        </div>
      </div>

      <div class="field-row">
        <div class="field">
          <label for="email">Email</label>
          <input
            id="email"
            type="email"
            pInputText
            formControlName="email"
            placeholder="Introduce your email"
            autocomplete="email"
            aria-describedby="email-error"
          />
          <small
            *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
            id="email-error"
            class="p-error"
          >
            Email not valid
          </small>
        </div>
      </div>

      <div class="field-row">
        <div class="field">
          <label for="password">Password</label>
          <input
            id="password"
            type="password"
            pPassword
            formControlName="password"
            placeholder="Introduce your password"
            [feedback]="false"
            autocomplete="new-password"
            aria-describedby="password-error"
          />
          <small
            *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched"
            id="password-error"
            class="p-error"
          >
            Password required
          </small>
        </div>

        <div class="field">
          <label for="confirmPassword">Confirm Password</label>
          <input
            id="confirmPassword"
            type="password"
            pPassword
            formControlName="confirmPassword"
            placeholder="Repeat your password"
            [feedback]="false"
            autocomplete="new-password"
            aria-describedby="confirmPassword-error"
          />
          <small
            *ngIf="registerForm.get('confirmPassword')?.invalid && registerForm.get('confirmPassword')?.touched"
            id="confirmPassword-error"
            class="p-error"
          >
            Passwords do not match
          </small>
        </div>
      </div>

      <div class="field">
        <button
          type="submit"
          pButton
          label="Register"
          [disabled]="registerForm.invalid || loading"
          [loading]="loading"
        ></button>
      </div>
      <div *ngIf="errorMsg" class="p-error" style="text-align:center; margin-top: 1rem;">
        {{ errorMsg }}
      </div>

      <div class="register-link">
        <p>Â¿Already have an account? <a routerLink="/login">Login</a></p>
      </div>
    </form>
  </p-card>
</div>
